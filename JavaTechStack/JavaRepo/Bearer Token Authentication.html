<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Bearer Token Authentication ‚Äì End-to-End Flow</title>

  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Arial, sans-serif;
      background: #f4f6f8;
      color: #1f2933;
      line-height: 1.6;
    }

    .container {
      max-width: 1150px;
      margin: 24px auto;
      background: #ffffff;
      padding: 28px 34px;
      border-radius: 10px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
    }

    h1 {
      font-size: 28px;
      border-bottom: 3px solid #2563eb;
      padding-bottom: 8px;
    }

    h2 {
      margin-top: 40px;
      font-size: 22px;
      color: #2563eb;
    }

    h3 {
      margin-top: 26px;
      font-size: 18px;
      color: #111827;
    }

    .note {
      background: #eef2ff;
      border-left: 6px solid #2563eb;
      padding: 16px 18px;
      margin: 20px 0;
      border-radius: 6px;
      font-weight: 500;
    }

    .warning {
      background: #fff7ed;
      border-left: 6px solid #f97316;
      padding: 16px 18px;
      margin: 20px 0;
      border-radius: 6px;
      font-weight: 600;
    }

    .success {
      background: #ecfdf5;
      border-left: 6px solid #10b981;
      padding: 16px 18px;
      margin: 20px 0;
      border-radius: 6px;
      font-weight: 600;
    }

    pre {
      background: #0f172a;
      color: #e5e7eb;
      padding: 14px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 14px;
      margin-top: 10px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 24px;
    }

    th, td {
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      text-align: left;
    }

    th {
      background: #f1f5f9;
      font-weight: 600;
    }

    code.inline {
      background: #e5e7eb;
      padding: 2px 6px;
      border-radius: 4px;
      font-family: Consolas, monospace;
      font-size: 14px;
    }

    .divider {
      height: 2px;
      background: linear-gradient(to right, #2563eb, transparent);
      margin: 40px 0;
    }
  </style>
</head>

<body>
	<div class="container">

	<h1>üîê Bearer Tokens ‚Äî Explained Clearly</h1>

	<div class="note">
	  <strong>Interview-Ready One-Liner:</strong><br />
	  Bearer token authentication works by issuing a time-limited token after login,
	  which the client sends in the <code class="inline">Authorization: Bearer</code> header
	  for subsequent requests‚Äîavoiding repeated credential exposure and enabling
	  stateless, scalable security.
	</div>

	<div class="divider"></div>

	<h2>üîÅ What Is a Bearer Token?</h2>

	<p>
	A <strong>Bearer Token</strong> is a <strong>temporary credential</strong> issued by the server
	<strong>after successful authentication</strong>.
	</p>

	<div class="warning">
	  Whoever <strong>bears the token</strong> can access protected resources ‚Äî
	  <strong>no password required</strong> on subsequent requests.
	</div>

	<div class="divider"></div>

	<h2>üîÑ Complete Flow (Start ‚Üí End)</h2>

	<h3>1Ô∏è‚É£ Initial Login (Authentication)</h3>

	<pre>
	POST /login
	Content-Type: application/json

	{
	  "username": "admin",
	  "password": "admin123"
	}
	</pre>

	<ul>
	  <li>Credentials sent <strong>once</strong></li>
	  <li>Server validates user</li>
	  <li>Server issues token (usually JWT)</li>
	</ul>

	<h3>2Ô∏è‚É£ Token Issued by Server</h3>

	<pre>
	{
	  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
	  "expires_in": 3600
	}
	</pre>

	<p>Token typically contains:</p>
	<ul>
	  <li>User ID</li>
	  <li>Roles / scopes</li>
	  <li>Expiry timestamp</li>
	  <li>Signature (tamper protection)</li>
	</ul>

	<h3>3Ô∏è‚É£ Subsequent Requests (Authorization)</h3>

	<pre>
	GET /secure/data
	Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
	</pre>

	<ul>
	  <li>No username/password</li>
	  <li>Server validates token</li>
	  <li>Access granted if token is valid</li>
	</ul>

	<div class="divider"></div>

	<h2>üîê Bearer Token vs Basic Authentication</h2>

	<table>
	  <tr>
		<th>Aspect</th>
		<th>Basic Auth</th>
		<th>Bearer Token</th>
	  </tr>
	  <tr>
		<td>Credentials sent</td>
		<td>Every request</td>
		<td>Only once</td>
	  </tr>
	  <tr>
		<td>Password exposure</td>
		<td>High</td>
		<td>None after login</td>
	  </tr>
	  <tr>
		<td>Token expiry</td>
		<td>‚ùå No</td>
		<td>‚úÖ Yes</td>
	  </tr>
	  <tr>
		<td>Revocation</td>
		<td>‚ùå Hard</td>
		<td>‚úÖ Easy</td>
	  </tr>
	  <tr>
		<td>Mobile / SPA friendly</td>
		<td>‚ùå No</td>
		<td>‚úÖ Yes</td>
	  </tr>
	  <tr>
		<td>Microservices ready</td>
		<td>‚ùå No</td>
		<td>‚úÖ Yes</td>
	  </tr>
	</table>

	<div class="divider"></div>

	<h2>‚ö†Ô∏è Important Security Notes (Interview Gold)</h2>

	<div class="warning">
	  Bearer tokens must be protected ‚Äî anyone with the token can act as the user.
	</div>

	<ul>
	  <li>‚úÖ Always use HTTPS</li>
	  <li>‚úÖ Keep access tokens short-lived</li>
	  <li>‚úÖ Store securely (HTTP-only cookies / secure storage)</li>
	  <li>‚ùå Avoid LocalStorage for sensitive apps</li>
	</ul>

	<div class="divider"></div>

	<h2>üîÑ Token Expiry & Refresh</h2>

	<ul>
	  <li><strong>Access Token</strong> ‚Üí short-lived (15 min ‚Äì 1 hour)</li>
	  <li><strong>Refresh Token</strong> ‚Üí long-lived</li>
	  <li>Refresh token used to obtain new access token</li>
	</ul>

	<div class="divider"></div>

	<h2>üåç Where Bearer Tokens Are Used</h2>

	<ul>
	  <li>REST APIs</li>
	  <li>Mobile applications</li>
	  <li>Single Page Applications (React / Angular)</li>
	  <li>Microservices communication</li>
	  <li>OAuth2 & OpenID Connect</li>
	  <li>API Gateways</li>
	</ul>
	</div>
	<div class="container">

	<h1>üîê End-to-End Postman Flow: Login ‚Üí JWT ‚Üí Secure API</h1>

	<h2>‚úÖ Pre-Check (Do This Once)</h2>

	<ul>
	  <li>Spring Boot app is <strong>RUNNING</strong> in Eclipse</li>
	  <li>Console shows:</li>
	</ul>

	<pre>
	Tomcat started on port(s): 8080
	</pre>

	<ul>
	  <li>PostgreSQL is running</li>
	  <li><code class="inline">users</code> table contains a valid user</li>
	  <li>Password is <strong>BCrypt encrypted</strong></li>
	  <li><code class="inline">/login</code> is permitted in SecurityConfig</li>
	</ul>

	<div class="divider"></div>

	<h2>1Ô∏è‚É£ Create Postman Environment (MANDATORY)</h2>

	<h3>Step 1</h3>
	<ul>
	  <li>Open Postman</li>
	  <li>Click <strong>Environments</strong></li>
	  <li>Click <strong>+ New</strong></li>
	</ul>

	<h3>Step 2 ‚Äì Environment Name</h3>

	<pre>
	Bearer-Auth-Env
	</pre>

	<h3>Step 3 ‚Äì Add Variable</h3>

	<table>
	  <tr>
		<th>Variable Name</th>
		<th>Initial Value</th>
		<th>Current Value</th>
	  </tr>
	  <tr>
		<td>jwt_token</td>
		<td>(empty)</td>
		<td>(empty)</td>
	  </tr>
	</table>

	<p><strong>Click Save</strong></p>

	<div class="divider"></div>

	<h2>2Ô∏è‚É£ Create Login Request (<code class="inline">/login</code>)</h2>

	<h3>Step 1 ‚Äì Request Details</h3>

	<ul>
	  <li>Name: <strong>POST Login</strong></li>
	  <li>Method: <strong>POST</strong></li>
	</ul>

	<pre>
	http://localhost:8080/login
	</pre>

	<h3>Step 2 ‚Äì Headers</h3>

	<table>
	  <tr>
		<th>Key</th>
		<th>Value</th>
	  </tr>
	  <tr>
		<td>Content-Type</td>
		<td>application/json</td>
	  </tr>
	</table>

	<h3>Step 3 ‚Äì Body</h3>

	<p>Select: <strong>Body ‚Üí raw ‚Üí JSON</strong></p>

	<pre>
	{
	  "username": "admin",
	  "password": "password"
	}
	</pre>

	<div class="divider"></div>

	<h2>3Ô∏è‚É£ Auto-Store Token (IMPORTANT PART)</h2>

	<h3>Step 1</h3>
	<ul>
	  <li>Open <strong>Scripts</strong> tab</li>
	  <li>Select <strong>Post-response</strong></li>
	</ul>

	<h3>Step 2 ‚Äì Paste Script</h3>

	<pre>
	var responseJson = pm.response.json();
	pm.environment.set("jwt_token", responseJson.token);
	console.log("JWT saved:", responseJson.token);
	</pre>

	<p><strong>Click Save</strong></p>

	<div class="divider"></div>

	<h2>4Ô∏è‚É£ Select Environment (CRITICAL)</h2>

	<pre>
	Bearer-Auth-Env
	</pre>

	<div class="warning">
	  ‚ö†Ô∏è If environment shows <strong>No environment</strong>, the token will NOT be saved.
	</div>

	<div class="divider"></div>

	<h2>5Ô∏è‚É£ Send Login Request</h2>

	<p>Click <strong>Send</strong></p>

	<h3>Expected Response</h3>

	<pre>
	{
	  "token": "eyJhbGciOiJIUzI1NiJ9..."
	}
	</pre>

	<div class="divider"></div>

	<h2>6Ô∏è‚É£ Verify Token Stored</h2>

	<ul>
	  <li>Open <strong>Environments</strong></li>
	  <li>Select <strong>Bearer-Auth-Env</strong></li>
	</ul>

	<pre>
	jwt_token = eyJhbGciOiJIUzI1NiJ9...
	</pre>

	<div class="success">
	  üéâ Token stored automatically
	</div>

	<div class="divider"></div>

	<h2>7Ô∏è‚É£ Create Secure Request (<code class="inline">/secure</code>)</h2>

	<ul>
	  <li>Name: <strong>GET Secure</strong></li>
	  <li>Method: <strong>GET</strong></li>
	</ul>

	<pre>
	http://localhost:8080/secure
	</pre>

	<div class="divider"></div>

	<h2>8Ô∏è‚É£ Use Stored Token</h2>

	<h3>Option A (RECOMMENDED)</h3>

	<ol>
	  <li>Authorization tab</li>
	  <li>Type: <strong>Bearer Token</strong></li>
	  <li>Token:</li>
	</ol>

	<pre>
	{{jwt_token}}
	</pre>

	<h3>Option B (Manual Header)</h3>

	<pre>
	Authorization: Bearer {{jwt_token}}
	</pre>

	<div class="divider"></div>

	<h2>9Ô∏è‚É£ Test Secure API</h2>

	<p>Click <strong>Send</strong></p>

	<h3>Expected Response</h3>

	<pre>
	You have accessed a SECURED endpoint!
	</pre>

	<div class="divider"></div>

	<h2>üî¥ Negative Tests (VERY IMPORTANT)</h2>

	<h3>‚ùå Without Token</h3>

	<ul>
	  <li>Remove Authorization</li>
	  <li>Send request</li>
	</ul>

	<pre>
	401 Unauthorized
	</pre>

	<h3>‚ùå Invalid Token</h3>

	<pre>
	Authorization: Bearer abc.xyz.123
	</pre>

	<pre>
	401 Unauthorized
	</pre>

	<div class="divider"></div>

	<h2>üß† What Happens Internally (Interview Gold)</h2>

	<pre>
	POST /login
	 ‚Üí DB lookup
	 ‚Üí BCryptPasswordEncoder.matches()
	 ‚Üí JWT issued
	 ‚Üí Postman saves token automatically

	GET /secure
	 ‚Üí JwtAuthenticationFilter
	 ‚Üí Token validated
	 ‚Üí SecurityContext set
	 ‚Üí Controller allowed
	</pre>

	<div class="divider"></div>

	<h2>üéØ Interview-Ready Summary</h2>

	<div class="success">
	  JWT-based authentication is tested by first obtaining a token from a login endpoint,
	  storing it automatically in a Postman environment via post-response scripts, and
	  reusing it in secured API calls through the Authorization Bearer header.
	</div>

	<h2>‚úÖ Final Checklist</h2>

	<ul>
	  <li>‚úî Environment created</li>
	  <li>‚úî Token auto-saved</li>
	  <li>‚úî Authorization header injected</li>
	  <li>‚úî 401 without token</li>
	  <li>‚úî 200 with token</li>
	</ul>

	</div>
</body>
</html>
